#%Module##############################
# Modulefile for Allina Forge
#

proc ModulesHelp { } {
  puts stderr "Arm Forge 23.1.1"
  puts stderr "================\n"
  puts stderr "This module adds the Allinea Forge tool to your environment.\n"
  puts stderr "Run \"ssh <username>@login.cirrus.ac.uk -L 4241:cirrus-ag1:4241\""
  puts stderr "to setup port 4241 for viewing the Arm Licence Server Status page"
  puts stderr "at \"http://localhost:4241/status.html\".\n"
  puts stderr "\tInstalled: 13 February 2024"
  puts stderr "\tInstalled by: kevin, EPCC"
}

set is_module_rm [module-info mode remove]

set FORGE_ROOT /work/y07/shared/cirrus-software/forge/23.1.1

set WORK_DIR $env(HOME)
set WORK_DIR [string trimleft $WORK_DIR /home]
set WORK_DIR /work/$WORK_DIR

setenv FORGE_DIR $FORGE_ROOT
setenv ALLINEA_MPIRUN /usr/bin/srun
setenv ALLINEA_CONFIG_DIR $WORK_DIR/.allinea

prepend-path PATH $FORGE_ROOT/bin
prepend-path LD_LIBRARY_PATH $FORGE_ROOT/lib
